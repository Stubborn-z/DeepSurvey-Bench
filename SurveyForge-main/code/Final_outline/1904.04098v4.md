I. INTRODUCTION

II. PREVIOUS SURVEYS AND TUTORIALS

III. FAULT-TOLERANT DISTRIBUTED CONSENSUS
A. System Model
B. Byzantine Fault Tolerant Consensus
C. Consensus in Distributed Computing
D. Consensus Protocols for Partially Synchronous Network
E. Consensus Protocols for Asynchronous Network
F. Blockchain Compatibility of Classical BFT-SMR Protocols

IV. AN OVERVIEW OF BLOCKCHAIN CONSENSUS
A. Blockchain Infrastructure
B. Consensus Goal
C. Components of Blockchain Consensus Protocol

V. THE NAKAMOTO CONSENSUS PROTOCOL AND VARIATIONS
A. Network Setting and Consensus Goal
B. The Nakamoto Consensus Protocol
C. Drawbacks and Vulnerabilities of Nakamoto Consensus
D. Improvements to the Nakamoto Consensus Protocol
E. Hybrid PoW-BFT Consensus Protocols

VI. PROOF-OF-STAKE BASED CONSENSUS PROTOCOLS
A. Chain-based PoS
B. Committee-based PoS
C. BFT-based PoS
D. Delegated PoS (DPoS)
E. Vulnerabilities of PoS

VII. OTHER EMERGING BLOCKCHAIN CONSENSUS MECHANISMS AND PROTOCOLS
A. Proof of Authority (PoA)
B. Proof of Elapsed Time (PoET)
C. Proof of TEE-Stake (PoTS)
D. Proof of Retrievability (PoR)
E. Ripple Consensus Protocol/Algorithm (RCPA)
F. BlockDAG-based Consensus Protocols
G. TxDAG-based Consensus Protocols

VIII. COMPARISON AND DISCUSSION

IX. ON DESIGNING BLOCKCHAIN CONSENSUS PROTOCOL
A. The Paradigm Shift in Protocol Design
B. The Security–Decentralization–Scalability Trilemma
C. Protocol Composability

X. CONCLUSION