1. Introduction  
2. Data Preparation  
2.1. Spatial-temporal Datasets  
2.2. Map Decomposition  
2.3. Dealing with Data Problems  
3. Spatial-temporal Data for Urban Flows Prediction  
4. Techniques for Urban Flows Prediction  
4.1. Statistics-based Methods  
4.2. Traditional Machine Learning Methods  
4.3. Deep Learning-based Methods  
4.4. Reinforcement Learning-based Methods  
4.5. Transfer Learning-based Methods  
5. Discussion  
6. Open Challenges  
7. Public Urban Spatial-temporal Datasets  
8. Conclusion and Future Work